%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
% Autonomous Intelligent System, University of Bonn, LaTeX Beamer theme
% 
% Copyright (c) 2010-2013 Dirk Holz, dirk.holz@ieee.org
% 
% All rights reserved.
% 
% Redistribution and use in source and binary forms, with or without
% modification, are permitted provided that the following conditions
% are met:
% 
% 1. Redistributions of source code must retain the above copyright
% notice, this list of conditions and the following disclaimer.
% 2. Redistributions in binary form must reproduce the above copyright
% notice, this list of conditions and the following disclaimer in the
% documentation and/or other materials provided with the distribution.
% 
% THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
% CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
% INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
% MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
% DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS
% BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
% EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
% TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
% DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
% ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
% OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
% OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
% POSSIBILITY OF SUCH DAMAGE.
% 
% The views and conclusions contained in the software and
% documentation are those of the authors and should not be
% interpreted as representing official policies, either expressed
% or implied, of the FreeBSD Project.

\newif\ifbeamer@themeouterAIS@subsection
\newif\ifbeamer@themeouterAIS@logoinnavbar

\DeclareOptionBeamer{subsection}[true]{\csname beamer@themeouterAIS@subsection#1\endcsname}
\DeclareOptionBeamer{logoinnavbar}[true]{\csname beamer@themeouterAIS@logoinnavbar#1\endcsname}
\ExecuteOptionsBeamer{subsection=false,logoinnavbar=false}
\ProcessOptionsBeamer

\mode<presentation>

\setbeamercolor*{author in head/foot}{parent=palette secondary}
\setbeamercolor*{title in head/foot}{parent=palette primary}
\setbeamercolor*{date in head/foot}{parent=palette tertiary}
\setbeamercolor*{footlineAIS}{parent=palette secondary}
\setbeamercolor*{section in head/foot}{parent=palette secondary}
\setbeamercolor*{subsection in head/foot}{parent=palette quaternary}
\setbeamercolor*{frametitle}{parent=palette quaternary}


\beamer@compresstrue

\AtBeginDocument{
  {
    \usebeamerfont*{headline}
    \colorlet{global.bg}{bg}
    \usebeamercolor{subsection in head/foot}
    \usebeamercolor{section in head/foot}
    \usebeamercolor{frametitle}

    \ifbeamer@themeouterAIS@subsection
    \pgfdeclareverticalshading{beamer@barshade}{\the\paperwidth}{%
      color(0ex)=(global.bg);%
      color(1ex)=(subsection in head/foot.bg);%
      color(3.25ex)=(subsection in head/foot.bg);%
      color(4.25ex)=(section in head/foot.bg);%
      color(9.75ex)=(section in head/foot.bg)%
    }
    \pgfdeclareverticalshading{beamer@aboveframetitle}{\the\paperwidth}{%
      color(0ex)=(frametitle.bg);%
      color(1ex)=(frametitle.bg);%
      color(2ex)=(subsection in head/foot.bg)
    }
    \else
    \pgfdeclareverticalshading{beamer@barshade}{\the\paperwidth}{%
      color(0ex)=(global.bg);%
      color(1ex)=(section in head/foot.bg);%
      color(7ex)=(section in head/foot.bg)%
    }
    \pgfdeclareverticalshading{beamer@aboveframetitle}{\the\paperwidth}{%
      color(0ex)=(frametitle.bg);%
      color(1ex)=(frametitle.bg);%
      color(2ex)=(section in head/foot.bg)
    }
    \fi  

    \pgfdeclareverticalshading{beamer@belowframetitle}{\the\paperwidth}{%
      color(0ex)=(global.bg);%
      color(1ex)=(frametitle.bg)
    }
  }
}

\defbeamertemplate*{headline}{smoothbars theme}
{%
  \pgfuseshading{beamer@barshade}%
  \ifbeamer@themeouterAIS@subsection%
  \vskip-9.75ex%
  \else%
  \vskip-7ex%
  \fi%
  \hbox{%
    \ifbeamer@themeouterAIS@logoinnavbar%
    \begin{beamercolorbox}[wd=.75\paperwidth,ignorebg,ht=2.25ex,dp=3.75ex]{section in head/foot}%
      \insertnavigation{0.74\paperwidth}%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=.25\paperwidth,ignorebg,ht=2.25ex,dp=3.75ex,right]{section in head/foot}%
      \vspace{-3ex}\includegraphics[width=0.12\paperwidth]{logo_uni_bonn_bw_inv.pdf}\hspace*{2ex}%
    \end{beamercolorbox}%
    \else%
    \begin{beamercolorbox}[ignorebg,ht=2.25ex,dp=3.75ex]{section in head/foot}%
      \insertnavigation{\paperwidth}%
    \end{beamercolorbox}%
    \fi  
  }
  \ifbeamer@themeouterAIS@subsection%
  \begin{beamercolorbox}[ignorebg,ht=2.125ex,dp=1.125ex,%
    leftskip=.3cm,rightskip=.3cm plus1fil]{subsection in head/foot}%
    \usebeamerfont{subsection in head/foot}\insertsubsectionhead%
  \end{beamercolorbox}%
  \fi%
}%


\defbeamertemplate*{footline}{infolines theme}
{%
  \leavevmode%
  \hbox{%
    \begin{beamercolorbox}[wd=.15\paperwidth,ht=2.25ex,dp=1ex,left]{footlineAIS}%
      \hspace*{2ex}\usebeamerfont{footlineAIS}\insertshortauthor
      % \hspace*{2ex}\usebeamerfont{footlineAIS}\insertshortauthor~~(\insertshortinstitute)
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=.7\paperwidth,ht=2.25ex,dp=1ex,center]{footlineAIS}%
      \usebeamerfont{footlineAIS}{\bfseries\insertshorttitle}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=.15\paperwidth,ht=2.25ex,dp=1ex,right]{footlineAIS}%
      \usebeamerfont{footlineAIS}\insertframenumber{} / \inserttotalframenumber\hspace*{2ex}
    \end{beamercolorbox}}%
  \vskip0pt%
}%


\defbeamertemplate*{frametitle}{smoothbars theme}
{%
  \nointerlineskip%
  \usebeamerfont{headline}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=1.5ex,dp=0ex,vmode]{empty}
    \pgfuseshading{beamer@aboveframetitle}%
  \end{beamercolorbox}%
  \vskip-.5ex%
  \nointerlineskip%
  \begin{beamercolorbox}[wd=\paperwidth,leftskip=.3cm,rightskip=.3cm plus1fil,vmode]{frametitle}
    \usebeamerfont*{frametitle}\insertframetitle%
    \ifx\insertframesubtitle\@empty%
    \strut\par%
    \else
    \par{\usebeamerfont*{framesubtitle}{\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}\strut\par}%
    \fi%%
    \usebeamerfont{headline}%
    \vskip.5ex  
  \end{beamercolorbox}%
  \nointerlineskip
  \begin{beamercolorbox}[wd=\paperwidth,ht=.5ex,dp=0ex]{empty}
    \pgfuseshading{beamer@belowframetitle}%
  \end{beamercolorbox}%
}

\mode
<all>
